if (typeof Object.create !== "function") { Object.create = function (e) { function t() { } t.prototype = e; return new t } } (function (e, t, n, r) { var i = { init: function (t, n) { var r = this; r.elem = n; r.$elem = e(n); r.options = e.extend({}, e.fn.toolbar.options, t); r.toolbar = e('<div class="tool-container gradient" />').addClass("tool-" + r.options.position).addClass("tool-rounded").append('<div class="tool-items" />').append('<div class="arrow" />').appendTo("body").css("opacity", 0).hide(); r.toolbar_arrow = r.toolbar.find(".arrow"); r.initializeToolbar() }, initializeToolbar: function () { var e = this; e.populateContent(); e.setTrigger(); e.toolbarWidth = e.toolbar.width() }, setTrigger: function () { var n = this; n.$elem.on("click", function (e) { e.preventDefault(); if (n.$elem.hasClass("pressed")) { n.hide() } else { n.show() } }); if (n.options.hideOnClick) { e("html").on("click.toolbar", function (e) { if (e.target != n.elem && n.$elem.has(e.target).length === 0 && n.toolbar.has(e.target).length === 0 && n.toolbar.is(":visible")) { n.hide() } }) } if (n.options.hover) { var r; function i() { if (n.$elem.hasClass("pressed")) { r = setTimeout(function () { n.hide() }, 150) } else { clearTimeout(r) } } n.$elem.on({ mouseenter: function (e) { if (n.$elem.hasClass("pressed")) { clearTimeout(r) } else { n.show() } } }); n.$elem.parent().on({ mouseleave: function (e) { i() } }); e(".tool-container").on({ mouseenter: function (e) { clearTimeout(r) }, mouseleave: function (e) { i() } }) } e(t).resize(function (e) { e.stopPropagation(); if (n.toolbar.is(":visible")) { n.toolbarCss = n.getCoordinates(n.options.position, 20); n.collisionDetection(); n.toolbar.css(n.toolbarCss); n.toolbar_arrow.css(n.arrowCss) } }) }, populateContent: function () { var t = this; var n = t.toolbar.find(".tool-items"); var r = e(t.options.content).clone(true).find("a").addClass("tool-item gradient"); n.html(r); n.find(".tool-item").on("click", function (e) { e.preventDefault(); t.$elem.trigger("toolbarItemClick", this) }) }, calculatePosition: function () { var e = this; e.arrowCss = {}; e.toolbarCss = e.getCoordinates(e.options.position, 0); e.toolbarCss.position = "absolute"; e.toolbarCss.zIndex = e.options.zIndex; e.collisionDetection(); e.toolbar.css(e.toolbarCss); e.toolbar_arrow.css(e.arrowCss) }, getCoordinates: function (e, t) { var n = this; n.coordinates = n.$elem.offset(); if (n.options.adjustment && n.options.adjustment[n.options.position]) { t = n.options.adjustment[n.options.position] + t } switch (n.options.position) { case "top": return { left: n.coordinates.left - n.toolbar.width() / 2 + n.$elem.outerWidth() / 2, top: n.coordinates.top - n.$elem.height() - t, right: "auto" }; case "left": return { left: n.coordinates.left - n.toolbar.width() / 2 - n.$elem.width() / 2 - t, top: n.coordinates.top - n.toolbar.height() / 2 + n.$elem.outerHeight() / 2, right: "auto" }; case "right": return { left: n.coordinates.left + n.toolbar.width() / 2 + n.$elem.width() / 3 + t, top: n.coordinates.top - n.toolbar.height() / 2 + n.$elem.outerHeight() / 2, right: "auto" }; case "bottom": return { left: n.coordinates.left - n.toolbar.width() / 2 + n.$elem.outerWidth() / 2, top: n.coordinates.top + n.$elem.height() + t, right: "auto" } } }, collisionDetection: function () { var n = this; var r = 20; if (n.options.position == "top" || n.options.position == "bottom") { n.arrowCss = { left: "50%", right: "50%" }; if (n.toolbarCss.left < r) { n.toolbarCss.left = r; n.arrowCss.left = n.$elem.offset().left + n.$elem.width() / 2 - r } else if (e(t).width() - (n.toolbarCss.left + n.toolbarWidth) < r) { n.toolbarCss.right = r; n.toolbarCss.left = "auto"; n.arrowCss.left = "auto"; n.arrowCss.right = e(t).width() - n.$elem.offset().left - n.$elem.width() / 2 - r - 5 } } }, show: function () { var e = this; var t = { opacity: 1 }; e.$elem.addClass("pressed"); e.calculatePosition(); switch (e.options.position) { case "top": t.top = "-=20"; break; case "left": t.left = "-=20"; break; case "right": t.left = "+=20"; break; case "bottom": t.top = "+=20"; break } e.toolbar.show().animate(t, 200); e.$elem.trigger("toolbarShown") }, hide: function () { var e = this; var t = { opacity: 0 }; e.$elem.removeClass("pressed"); switch (e.options.position) { case "top": t.top = "+=20"; break; case "left": t.left = "+=20"; break; case "right": t.left = "-=20"; break; case "bottom": t.top = "-=20"; break } e.toolbar.animate(t, 200, function () { e.toolbar.hide() }); e.$elem.trigger("toolbarHidden") }, getToolbarElement: function () { return this.toolbar.find(".tool-items") } }; e.fn.toolbar = function (t) { if (e.isPlainObject(t)) { return this.each(function () { var n = Object.create(i); n.init(t, this); e(this).data("toolbarObj", n) }) } else if (typeof t === "string" && t.indexOf("_") !== 0) { var n = e(this).data("toolbarObj"); var r = n[t]; return r.apply(n, e.makeArray(arguments).slice(1)) } }; e.fn.toolbar.options = { content: "#myContent", position: "top", hideOnClick: false, zIndex: 120, hover: false } })(jQuery, window, document)